<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="520" viewBox="0 0 1000 520">
  <style>
    .box { fill:#ffffff; stroke:#2b6cb0; stroke-width:2; rx:6; }
    .title { font: bold 14px sans-serif; fill:#2b6cb0 }
    .label { font: 12px sans-serif; fill:#1a202c }
    .small { font: 11px sans-serif; fill:#4a5568 }
    .arrow { stroke:#2d3748; stroke-width:2; fill:none; marker-end:url(#arrowhead); }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2d3748" />
    </marker>
  </defs>

  <!-- Frontend -->
  <rect x="40" y="30" width="180" height="70" class="box"/>
  <text x="130" y="55" text-anchor="middle" class="title">Frontend UI</text>
  <text x="130" y="74" text-anchor="middle" class="small">Next.js chat client</text>

  <!-- Backend -->
  <rect x="300" y="20" width="220" height="100" class="box"/>
  <text x="410" y="50" text-anchor="middle" class="title">Backend (Flask)</text>
  <text x="410" y="70" text-anchor="middle" class="small">chat endpoints & streaming</text>

  <!-- Agent Type -->
  <rect x="600" y="10" width="340" height="120" class="box"/>
  <text x="770" y="34" text-anchor="middle" class="title">Agent Executor</text>
  <text x="770" y="54" text-anchor="middle" class="small">Data / Plugins / Web</text>

  <!-- Boxes inside Agent -->
  <rect x="630" y="60" width="100" height="40" rx="6" fill="#f7fafc" stroke="#2b6cb0"/>
  <text x="680" y="85" text-anchor="middle" class="label">Data Agent</text>
  <rect x="750" y="60" width="120" height="40" rx="6" fill="#f7fafc" stroke="#2b6cb0"/>
  <text x="810" y="85" text-anchor="middle" class="label">Plugins Agent</text>
  <rect x="880" y="60" width="70" height="40" rx="6" fill="#f7fafc" stroke="#2b6cb0"/>
  <text x="915" y="85" text-anchor="middle" class="label">Webot</text>

  <!-- Connections -->
  <path d="M220 65 L300 65" class="arrow" />
  <path d="M520 65 L600 65" class="arrow" />

  <!-- LLM -->
  <rect x="250" y="200" width="160" height="60" class="box"/>
  <text x="330" y="230" text-anchor="middle" class="title">LLM</text>
  <text x="330" y="250" text-anchor="middle" class="small">OpenAI / Anthropic / Hosted</text>
  <path d="M700 120 L400 220" class="arrow" />

  <!-- Plugins API -->
  <rect x="520" y="200" width="160" height="60" class="box"/>
  <text x="600" y="230" text-anchor="middle" class="title">Plugins / APIs</text>
  <text x="600" y="250" text-anchor="middle" class="small">200+ tools</text>
  <path d="M820 120 L680 200" class="arrow" />

  <!-- Code Exec -->
  <rect x="740" y="220" width="170" height="60" class="box"/>
  <text x="855" y="250" text-anchor="middle" class="title">Code Execution</text>
  <text x="855" y="270" text-anchor="middle" class="small">local / docker sandbox</text>
  <path d="M690 120 L820 240" class="arrow" />

  <!-- Webot Extension -->
  <rect x="60" y="300" width="200" height="60" class="box"/>
  <text x="160" y="330" text-anchor="middle" class="title">Webot Extension</text>
  <text x="160" y="350" text-anchor="middle" class="small">Chrome extension events</text>
  <path d="M915 85 L260 320" class="arrow" />

  <!-- Redis & Mongo -->
  <rect x="380" y="320" width="120" height="50" class="box"/>
  <text x="440" y="345" text-anchor="middle" class="title">Redis</text>
  <text x="440" y="362" text-anchor="middle" class="small">cache & webot state</text>

  <rect x="520" y="320" width="150" height="50" class="box"/>
  <text x="595" y="345" text-anchor="middle" class="title">MongoDB</text>
  <text x="595" y="362" text-anchor="middle" class="small">persistent chats & users</text>

  <path d="M410 120 L430 320" class="arrow" />
  <path d="M760 120 L590 320" class="arrow" />

  <!-- Stream back to frontend -->
  <path d="M520 360 L230 110" class="arrow" />
  <text x="370" y="190" class="small" text-anchor="middle">Responses and streams aggregated by backend</text>

</svg>
